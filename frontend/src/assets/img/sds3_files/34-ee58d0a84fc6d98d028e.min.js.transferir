(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{14401:function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"PersistentState",(function(){return K})),o.d(t,"CollectionModel",(function(){return J})),o.d(t,"FolderModel",(function(){return Z})),o.d(t,"RequestModel",(function(){return ee})),o.d(t,"ResponseModel",(function(){return te})),o.d(t,"default",(function(){return oe}));var r,s,i,n,a,c,d,p,l,h,u,O,b,f,m,y,E,I,T,g,C,_,P,A=o(1251),D=o(2870),S=o(14402),j=o(3275),v=o(2100),R=o(3302),w=o(4234),N=o(4232),U=o(4237),L=o(4240),F=o(3287),$=o(3288),M=o(3290),x=o(3303),q=o(3301),Y=o(3315),k=o(3274),G=o(3270),Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};function H(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function z(e,t,o,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce((function(o,r){return r(e,t,o)||o}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const W="loading";function V(){pm.toasts.error("You do not have permissions to perform this action")}function B(t){pm.toasts.error(`Could not move ${e.capitalize(t)} successfully`)}let K=(s=z((r=class{constructor(){H(this,"dropdownOpen",s,this),H(this,"dropHoverTop",i,this),H(this,"dropHoverBottom",n,this),H(this,"dropHover",a,this),H(this,"isHovered",c,this),this.isEditing=!1,this.editStateCache=null,this.inputRef=null,this._hoverUpdateAnimationFrame=null}clearEditStateCache(){this.editStateCache=null}getEditStateCacheValue(){return editStateCache.value}setHovered(e){this.isHovered=e}scheduleHoverUpdate(e){this._hoverUpdateAnimationFrame||(this._hoverUpdateAnimationFrame=requestAnimationFrame(()=>{try{"bottom"===e?this.dropHoverBottom||Object(A.runInAction)(()=>{this.dropHoverBottom=!0,this.dropHoverTop=!1,this.dropHover=!1}):"top"===e?this.dropHoverTop||Object(A.runInAction)(()=>{this.dropHoverBottom=!1,this.dropHoverTop=!0,this.dropHover=!1}):Object(A.runInAction)(()=>{this.dropHoverBottom=!1,this.dropHoverTop=!1,this.dropHover=!0})}finally{this._hoverUpdateAnimationFrame=null}}))}cancelHoverUpdate(){cancelAnimationFrame(this._hoverUpdateAnimationFrame)}setDropdownOpen(e){this.dropdownOpen=e}startEditing(){this.isEditing||(this.inputRef&&this.inputRef.startEditing(),this.isEditing=!0)}stopEditing(){this.isEditing&&(this.inputRef&&this.inputRef.stopEditing(),this.isEditing=!1)}setInputRef(e){e&&(this.inputRef=e,this.isEditing&&this.editStateCache&&this.inputRef.setEditState(this.editStateCache),this.clearEditStateCache())}clearInputRef(){this.isEditing&&this.inputRef&&(this.editStateCache=this.inputRef.getEditState()),this.inputRef=null}focusOnInput(){this.inputRef.focus(),this.inputRef.selectAll()}}).prototype,"dropdownOpen",[A.observable],{enumerable:!0,initializer:function(){return!1}}),i=z(r.prototype,"dropHoverTop",[A.observable],{enumerable:!0,initializer:function(){return!1}}),n=z(r.prototype,"dropHoverBottom",[A.observable],{enumerable:!0,initializer:function(){return!1}}),a=z(r.prototype,"dropHover",[A.observable],{enumerable:!0,initializer:function(){return!1}}),c=z(r.prototype,"isHovered",[A.observable],{enumerable:!0,initializer:function(){return!1}}),z(r.prototype,"setHovered",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setHovered"),r.prototype),z(r.prototype,"scheduleHoverUpdate",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"scheduleHoverUpdate"),r.prototype),z(r.prototype,"setDropdownOpen",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setDropdownOpen"),r.prototype),r);function X(t){return class extends t{startRename(){this._persistentState.startEditing()}cancelRename(){this._persistentState.stopEditing()}commitCachedRename(){if(!this._persistentState.isEditing)return;if(this._persistentState.stopEditing(),e.isNil(this._persistentState.editStateCache))return;const t=this._persistentState.getEditStateCacheValue();this.commitRename(t)}dispose(){this.commitCachedRename(),e.isFunction(super.dispose)&&super.dispose()}}}let J=(d=A.action.bound,p=A.action.bound,l=class extends(X(w.default)){constructor(t,o){super(t),this.depth=0,this.folders=A.observable.map([],{deep:!1}),this.requests=A.observable.map([],{deep:!1}),H(this,"attributes",h,this),this._persistentState=new K,this.update(t),this.$model=o,this.openInTab=e.debounce(this._openInTab,300,{leading:!0})}update(t){super.update(t),e.has(t,"attributes")&&(this.attributes=t.attributes)}setFavorite(e){this.attributes&&this.attributes.flags&&(this.attributes.flags.isFavorite=e)}toggleIsFavorite(){const t=e.get(this.attributes,"flags.isFavorite");this.attributes&&this.attributes.flags&&(this.attributes.flags.isFavorite=!t)}commitRename(e){this.handleAction(q.ACTION_TYPE_RENAME,{name:e})}async handleAction(t,o){if(Object(F.collectionActionAllowedInWorkspace)(t)){if(t===q.ACTION_TYPE_DELETE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.userCanDelete?Object(F.deleteCollection)(this.id,{name:this.name}).then(e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))}).catch(e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",t,e)}):V():Object(j.showOfflineActionDisabledToast)();if(t===q.ACTION_TYPE_RENAME)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?Object(F.renameCollection)(this.id,o.name).then(()=>{this.update({name:o.name}),pm.mediator.trigger("focusSidebar")}).catch(e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",t,e)}):V():Object(j.showOfflineActionDisabledToast)();if(t===q.ACTION_REMOVE_FROM_WORKSPACE)return Object(D.getStore)("OnlineStatusStore").userCanSaveAndSync?void pm.mediator.trigger("showRemoveFromWorkspaceModal",this.id,{type:R.COLLECTION,origin:"sidebar",disableDelete:!this.userCanDelete,disableShare:!this.userCanShare},()=>{this.$model.focusPreviousItem(),this.$model.removeEntity(this),Y.default.closeByRoute(k.WORKFLOW_URL.OPEN_COLLECTION,{cid:this.id})}):Object(j.showOfflineActionDisabledToast)();if(t===q.ACTION_TYPE_RENAME_TOGGLE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):V():Object(j.showOfflineActionDisabledToast)();if(t===q.ACTION_TYPE_DUPLICATE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?Object(F.duplicateCollection)(this.id,{origin:"sidebar"}):V():Object(j.showOfflineActionDisabledToast)();if(t===q.ACTION_TYPE_ADD_FOLDER){if(!Object(D.getStore)("OnlineStatusStore").userCanSave)return Object(j.showOfflineActionDisabledToast)();const{owner:e}=Object(v.decomposeUID)(this.id)||{},t="fakeId",o=Object(v.composeUID)(t,e),r={id:o,type:W,depth:1,order:[],foldersOrder:[],parent:this};this.folders.set(o,r),this.foldersOrder.push(t)}if(t===q.ACTION_TYPE_ADD_REQUEST){if(!Object(D.getStore)("OnlineStatusStore").userCanSave)return Object(j.showOfflineActionDisabledToast)();const{owner:e}=Object(v.decomposeUID)(this.id)||{},t="fakeId",o=Object(v.composeUID)(t,e),r={id:o,type:W,depth:1,responses:[],parent:this};this.requests.set(o,r),this.order.push(t)}return t===q.ACTION_TYPE_PULL_REQUEST?Object(D.getStore)("OnlineStatusStore").userCanSaveAndSync?this.isForked?Object(F.createPullRequest)(this.id,this.forkInfo):V():Object(j.showOfflineActionDisabledToast)():t===q.ACTION_TYPE_MERGE?Object(D.getStore)("OnlineStatusStore").userCanSaveAndSync?this.isForked?Object(F.mergeChanges)(this.id,this.forkInfo):V():Object(j.showOfflineActionDisabledToast)():void Object(F.collectionActions)(this.id,t,o,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.id,flags:e.get(this.attributes,"flags"),toggleIsFavorite:this.toggleIsFavorite})}}_openInTab(){Object(F.openCollectionInTab)(this.id)}get actions(){const e=Object(D.getStore)("PermissionStore"),t=Object(D.getStore)("CurrentUserStore"),o=Object(D.getStore)("ActiveWorkspaceStore").id,{userCanSave:r,userCanSaveAndSync:s}=Object(D.getStore)("OnlineStatusStore"),i=Object(v.decomposeUID)(this.id).modelId,n=Object(D.getStore)("CollectionStore").find(i),a=Object(G.isLoggedIn)()&&Object(G.isWorkspaceMember)()&&Object(D.getStore)("PermissionStore").can("addCollectionrun","workspace",o);return[{type:q.ACTION_TYPE_SHARE,label:"Share collection",isEnabled:s&&this.userCanShare,xpathLabel:"share"},{type:q.ACTION_TYPE_RUN,label:"Run collection",isEnabled:a,xpathLabel:"runCollection"},{type:q.ACTION_TYPE_OPEN,label:r&&this.userCanUpdate?"Edit":"View details",isEnabled:!0,xpathLabel:"edit"},{type:q.ACTION_TYPE_ADD_REQUEST,label:"Add request",isEnabled:r&&this.userCanUpdate,xpathLabel:"addRequest"},{type:q.ACTION_TYPE_ADD_FOLDER,label:"Add folder",isEnabled:r&&this.userCanUpdate,xpathLabel:"addFolder"},{type:q.ACTION_TYPE_ADD_MONITOR,label:"Monitor collection",isEnabled:s&&this.userCanCreateMonitor&&e.can("addMonitor","workspace",o),xpathLabel:"monitor"},{type:q.ACTION_TYPE_ADD_MOCK,label:"Mock collection",isEnabled:s&&this.userCanCreateMock&&e.can("addMock","workspace",o),xpathLabel:"mock"},{type:q.ACTION_TYPE_FORK,label:"Create a fork",isEnabled:s,xpathLabel:"fork"},{type:q.ACTION_TYPE_PULL_REQUEST,label:"Create Pull Request",isEnabled:s&&this.isForked,xpathLabel:"pull-request"},{type:q.ACTION_TYPE_MERGE,label:"Merge changes",isEnabled:s&&this.isForked,xpathLabel:"merge"},{type:q.ACTION_VIEW_DOCUMENTATION,label:"View documentation",isEnabled:!pm.isScratchpad,xpathLabel:"documentation"},{type:q.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:r&&this.userCanUpdate,xpathLabel:"rename"},{type:q.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:r&&e.can("addCollection","workspace",o),xpathLabel:"duplicate"},{type:q.ACTION_TYPE_DOWNLOAD,label:"Export",isEnabled:(r||n)&&e.can("export","collection",i),xpathLabel:"export"},{type:q.ACTION_MANAGE_ROLES,label:"Manage roles",isEnabled:s&&!!t.team,xpathLabel:"manageRoles"},{type:q.ACTION_REMOVE_FROM_WORKSPACE,label:"Remove from workspace",isEnabled:s&&e.can("removeCollection","workspace",o),xpathLabel:"remove"},{type:q.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:r&&this.userCanDelete,xpathLabel:"delete"}]}get xpath(){return this.id}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===q.ACTION_TYPE_ADD_REQUEST||e===q.ACTION_TYPE_ADD_FOLDER?this.userCanUpdate:e===q.ACTION_TYPE_DOWNLOAD||(e===q.ACTION_TYPE_DELETE?this.userCanDelete:e===q.ACTION_TYPE_SHARE?this.userCanShare:e===q.ACTION_TYPE_RENAME?this.userCanUpdate:e!==q.ACTION_TYPE_RENAME_TOGGLE||this.userCanUpdate)}async placeNextTo(e,t,o){if(t.type!==o.type)return;const{modelId:r}=Object(v.decomposeUID)(o.id),{modelId:s}=Object(v.decomposeUID)(t.id),i="after"===e?1:-1;if(o.type===R.FOLDER){const e=[...this.foldersOrder].filter(e=>e!==r),t=e.indexOf(s);return e.splice(t+i,0,r),Object(F.updateCollectionChildrenOrder)(this.id,{folders_order:e})}if(o.type===R.REQUEST){const e=[...this.order].filter(e=>e!==r),t=e.indexOf(s);return e.splice(t+i,0,r),Object(F.updateCollectionChildrenOrder)(this.id,{order:e})}}},h=z(l.prototype,"attributes",[A.observable],{enumerable:!0,initializer:function(){return{}}}),z(l.prototype,"update",[A.action],Object.getOwnPropertyDescriptor(l.prototype,"update"),l.prototype),z(l.prototype,"setFavorite",[d],Object.getOwnPropertyDescriptor(l.prototype,"setFavorite"),l.prototype),z(l.prototype,"toggleIsFavorite",[p],Object.getOwnPropertyDescriptor(l.prototype,"toggleIsFavorite"),l.prototype),z(l.prototype,"handleAction",[A.action],Object.getOwnPropertyDescriptor(l.prototype,"handleAction"),l.prototype),l),Z=(z((u=class extends(X(N.default)){constructor(t,o){super(t),this.depth=0,this.folders=A.observable.map([],{deep:!1}),this.requests=A.observable.map([],{deep:!1}),this._persistentState=new K,this.$model=o,this.openInTab=e.debounce(this._openInTab,300,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}get $index(){const{modelId:e}=Object(v.decomposeUID)(this.id);return this.$model.getParent(this).foldersOrder.indexOf(e)}commitRename(e){this.handleAction(q.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t){if(Object($.folderActionAllowedInWorkspace)(e)){if(e===q.ACTION_TYPE_DELETE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?Object($.deleteFolder)(this.id,{name:this.name,collectionId:this.collection}).then(e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))}).catch(t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)}):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_RENAME)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?Object($.renameFolder)(this.id,this.collection,t.name).then(()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")}).catch(t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)}):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_RENAME_TOGGLE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_DUPLICATE){if(!Object(D.getStore)("OnlineStatusStore").userCanSave)return Object(j.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return V();const e=this.$model.getParent(this),{owner:t}=Object(v.decomposeUID)(this.id)||{},o="fakeId",r=Object(v.composeUID)(o,t),s={id:r,type:W,depth:e.depth+1,order:[],foldersOrder:[],parent:e};return e.folders.set(r,s),e.foldersOrder.splice(this.$index+1,0,o),Object($.duplicateFolder)(this.id,{parentModel:e.type,parentId:e.id})}if(e===q.ACTION_TYPE_ADD_FOLDER){if(!Object(D.getStore)("OnlineStatusStore").userCanSave)return Object(j.showOfflineActionDisabledToast)();const{owner:e}=Object(v.decomposeUID)(this.id)||{},t="fakeId",o=Object(v.composeUID)(t,e),r={id:o,type:W,depth:this.depth+1,order:[],foldersOrder:[],parent:this};this.folders.set(o,r),this.foldersOrder.push(t)}if(e===q.ACTION_TYPE_ADD_REQUEST){if(!Object(D.getStore)("OnlineStatusStore").userCanSave)return Object(j.showOfflineActionDisabledToast)();const{owner:e}=Object(v.decomposeUID)(this.id)||{},t="fakeId",o=Object(v.composeUID)(t,e),r={id:o,type:W,depth:this.depth+1,responses:[],parent:this};this.requests.set(o,r),this.order.push(t)}Object($.folderActions)(this.id,e,t,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(){Object($.openFolderInTab)(this.id)}get actions(){const{userCanSave:e}=Object(D.getStore)("OnlineStatusStore");return[{type:q.ACTION_TYPE_OPEN,label:this.$collection.userCanUpdate?"Edit":"View Details",isEnabled:!0,xpathLabel:"edit"},{type:q.ACTION_TYPE_ADD_REQUEST,label:"Add Request",isEnabled:e&&this.$collection.userCanUpdate},{type:q.ACTION_TYPE_ADD_FOLDER,label:"Add Folder",isEnabled:e&&this.$collection.userCanUpdate},{type:q.ACTION_VIEW_DOCUMENTATION,label:"View Documentation",isEnabled:!pm.isScratchpad},{type:q.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate},{type:q.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate},{type:q.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate}]}get xpath(){return`${this.$model.getParent(this).xpath}/folder/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const o=this.$model.getModel(e.type).get(e.id),{owner:r}=Object(v.decomposeUID)(this.id)||{},s=Object(v.composeUID)("fakeId",r),i={id:s,type:W,depth:o.depth+1,order:[],foldersOrder:[],parent:o};o.folders.set(s,i),o.foldersOrder.push("fakeId"),t.foldersOrder.splice(this.$index,1),t.folders.delete(this.id),await Object($.transferFolder)(this.id,e.type,e.id)}async reorder(e,t){const o=this.$model.getModel(e.type).get(e.id),r=this.$model.getParent(e),s=this.$model.getParent(this),i=this.$model.getParent(e),{owner:n}=Object(v.decomposeUID)(this.id)||{},a=Object(v.composeUID)("fakeId",n),c={id:a,type:W,depth:i.depth+1,order:[],foldersOrder:[],parent:i},d="before"===t?0:1,p=o.$index+d;i.folders.set(a,c),i.foldersOrder.splice(p,0,"fakeId"),s.foldersOrder.splice(this.$index,1),s.folders.delete(this.id),Object($.reorderFolder)(this.id,r.type,r.id,e.id,t).catch(Object(A.action)(()=>{i.foldersOrder.splice(p,1),i.folders.delete(c.id),s.folders.set(this.id,this),s.foldersOrder.splice(this.$index,0,modelId),B(this.type)}))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:o}=Object(v.decomposeUID)(this.id)||{},r=Object(v.composeUID)("fakeId",o),s={id:r,type:W,depth:t.depth+1,order:[],foldersOrder:[],parent:t};t.folders.set(r,s),t.foldersOrder.push("fakeId"),await Object($.copyFolderTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===q.ACTION_TYPE_ADD_REQUEST||e===q.ACTION_TYPE_ADD_FOLDER||e===q.ACTION_TYPE_DELETE||e===q.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==q.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}async placeNextTo(e,t,o){if(t.type!==o.type)return;const{modelId:r}=Object(v.decomposeUID)(o.id),{modelId:s}=Object(v.decomposeUID)(t.id),i="after"===e?1:-1;if(o.type===R.FOLDER){const e=[...this.foldersOrder].filter(e=>e!==r),t=e.indexOf(s);return e.splice(t+i,0,r),Object($.updateFolderChildrenOrder)(this.id,{folders_order:e})}if(o.type===R.REQUEST){const e=[...this.order].filter(e=>e!==r),t=e.indexOf(s);return e.splice(t+i,0,r),Object($.updateFolderChildrenOrder)(this.id,{order:e})}}}).prototype,"handleAction",[A.action],Object.getOwnPropertyDescriptor(u.prototype,"handleAction"),u.prototype),z(u.prototype,"transfer",[A.action],Object.getOwnPropertyDescriptor(u.prototype,"transfer"),u.prototype),z(u.prototype,"reorder",[A.action],Object.getOwnPropertyDescriptor(u.prototype,"reorder"),u.prototype),z(u.prototype,"pasteTo",[A.action],Object.getOwnPropertyDescriptor(u.prototype,"pasteTo"),u.prototype),u),ee=(z((O=class extends(X(U.default)){constructor(t,o){super(t),this.depth=0,this.responses=A.observable.map([],{deep:!1}),this._persistentState=new K,this.$model=o,this.openInTab=e.debounce(this._openInTab,300,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}get $index(){const{modelId:e}=Object(v.decomposeUID)(this.id);return this.$model.getParent(this).order.indexOf(e)}commitRename(e){this.handleAction(q.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t,o){if(Object(M.requestActionAllowedInWorkspace)(e)){if(e===q.ACTION_TYPE_DELETE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?Object(M.deleteRequest)(this.id,{name:this.name,collectionId:this.collection}).then(e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))}).catch(t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)}):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_RENAME)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?Object(M.renameRequest)(this.id,this.collection,t.name).then(()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")}).catch(t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)}):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_RENAME_TOGGLE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_DUPLICATE){if(!Object(D.getStore)("OnlineStatusStore").userCanSave)return Object(j.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return V();const e=this.$model.getParent(this),{owner:t}=Object(v.decomposeUID)(this.id)||{},o="fakeId",r=Object(v.composeUID)(o,t),s={id:r,type:W,depth:e.depth+1,responses:[],parent:e};return e.requests.set(r,s),e.order.splice(this.$index+1,0,o),Object(M.duplicateRequest)(this.id,{parentModel:e.type,parentId:e.id})}Object(M.requestActions)(this.id,e,t,Q({},o||{},{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection}))}}_openInTab(){Object(M.openRequestInTab)(this.id)}get actions(){const{userCanSave:e}=Object(D.getStore)("OnlineStatusStore");return[{type:q.ACTION_TYPE_ADD_EXAMPLE,label:"Add example",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:q.ACTION_TYPE_ADD_EXAMPLE},{type:q.ACTION_VIEW_DOCUMENTATION,label:"View Documentation",isEnabled:!pm.isScratchpad,xpathLabel:q.ACTION_VIEW_DOCUMENTATION},{type:q.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:q.ACTION_TYPE_RENAME_TOGGLE},{type:q.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:q.ACTION_TYPE_DUPLICATE},{type:q.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:q.ACTION_TYPE_DELETE}]}get xpath(){return`${this.$model.getParent(this).xpath}/request/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const o=this.$model.getModel(e.type).get(e.id),{owner:r}=Object(v.decomposeUID)(this.id)||{},s=Object(v.composeUID)("fakeId",r),i={id:s,type:W,depth:o.depth+1,responses:[],parent:o};return o.requests.set(s,i),o.order.push("fakeId"),t.order.splice(this.$index,1),t.requests.delete(this.id),Object(M.transferRequest)(this.id,e.type,e.id,t.type,t.id)}async reorder(e,t){const o=this.$model.getModel(e.type).get(e.id),r=this.$model.getParent(e),s=this.$model.getParent(this),i=this.$model.getParent(e),{owner:n,modelId:a}=Object(v.decomposeUID)(this.id)||{},c=Object(v.composeUID)("fakeId",n),d={id:c,type:W,depth:i.depth+1,responses:[],parent:i},p="before"===t?0:1,l=o.$index+p;i.requests.set(c,d),i.order.splice(l,0,"fakeId"),s.order.splice(this.$index,1),s.requests.delete(this.id),Object(M.reorderRequest)(this.id,r.type,r.id,e.id,t).catch(Object(A.action)(()=>{i.order.splice(l,1),i.requests.delete(d.id),s.requests.set(this.id,this),s.order.splice(this.$index,0,a),B(this.type)}))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:o}=Object(v.decomposeUID)(this.id)||{},r=Object(v.composeUID)("fakeId",o),s={id:r,type:W,depth:t.depth+1,responses:[],parent:t};t.requests.set(r,s),t.order.push("fakeId"),await Object(M.copyRequestTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===q.ACTION_TYPE_ADD_EXAMPLE||e===q.ACTION_TYPE_DELETE||e===q.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==q.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}}).prototype,"handleAction",[A.action],Object.getOwnPropertyDescriptor(O.prototype,"handleAction"),O.prototype),z(O.prototype,"transfer",[A.action],Object.getOwnPropertyDescriptor(O.prototype,"transfer"),O.prototype),z(O.prototype,"reorder",[A.action],Object.getOwnPropertyDescriptor(O.prototype,"reorder"),O.prototype),z(O.prototype,"pasteTo",[A.action],Object.getOwnPropertyDescriptor(O.prototype,"pasteTo"),O.prototype),O),te=(z((b=class t extends(X(L.default)){constructor(t,o){super(t),this.depth=0,this._persistentState=new K,this.$model=o,this.method=t.method,this.openInTab=e.debounce(this._openInTab,300,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}update(t){super.update(t),e.has(t,"method")&&(this.method=t.method)}commitRename(e){this.handleAction(q.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,o){if(Object(x.exampleActionAllowedInWorkspace)(e)){if(e===q.ACTION_TYPE_DELETE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?Object(x.deleteExample)(this.id,{name:this.name,collectionId:this.collection}).then(e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))}).catch(t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)}):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_RENAME)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?Object(x.renameExample)(this.id,this.collection,o.name).then(()=>{this.update({name:o.name}),pm.mediator.trigger("focusSidebar")}).catch(t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)}):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_RENAME_TOGGLE)return Object(D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):V():Object(j.showOfflineActionDisabledToast)();if(e===q.ACTION_TYPE_DUPLICATE){if(!Object(D.getStore)("OnlineStatusStore").userCanSave)return Object(j.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return V();const{owner:e}=Object(v.decomposeUID)(this.id);return Object(x.duplicateExample)(this.id,{origin:"sidebar",collectionId:this.$collection.id}).then(o=>new t(Q({},o,{id:Object(v.composeUID)(o.id,e),request:this.request,collection:this.collection}),this.$model))}Object(x.exampleActions)(this.id,e,o,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(){Object(x.openExampleInTab)(this.id)}get actions(){const{userCanSave:e}=Object(D.getStore)("OnlineStatusStore");return[{type:q.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:q.ACTION_TYPE_RENAME_TOGGLE},{type:q.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:q.ACTION_TYPE_DUPLICATE},{type:q.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:q.ACTION_TYPE_DELETE}]}get $index(){const e=this.$model.getParent(this);if("browser"===window.SDK_PLATFORM)return e.responsesOrder.indexOf(this.id);const{modelId:t}=Object(v.decomposeUID)(this.id);return e.responsesOrder.indexOf(t)}get xpath(){return`${this.$model.getParent(this).xpath}/response/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const o=this.$model.getModel(e.type).get(e.id),{owner:r}=Object(v.decomposeUID)(this.id)||{},s=Object(v.composeUID)("fakeId",r),i={id:s,type:W,depth:o.depth+1,parent:o};return o.responses.set(s,i),o.responsesOrder.push("fakeId"),t.responsesOrder.splice(this.$index,1),Object(x.transferResponse)(this.id,e.type,e.id,t.type,t.id)}async reorder(e,t){const o=this.$model.getModel(e.type).get(e.id),r=this.$model.getParent(e),s=this.$model.getParent(this),i=this.$model.getParent(e),{owner:n,modelId:a}=Object(v.decomposeUID)(this.id)||{},c=Object(v.composeUID)("fakeId",n),d={id:c,type:W,depth:i.depth+1,parent:i},p="before"===t?0:1,l=o.$index+p;i.responses.set(c,d),i.responsesOrder.splice(l,0,"fakeId"),s.responsesOrder.splice(this.$index,1),Object(x.reorderResponse)(this.id,r.type,r.id,e.id,t).catch(Object(A.action)(()=>{i.responsesOrder.splice(l,1),i.responses.delete(d.id),s.responses.set(this.id,this),s.responsesOrder.splice(this.$index,0,a),B(this.type)}))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:o}=Object(v.decomposeUID)(this.id)||{},r=Object(v.composeUID)("fakeId",o),s={id:r,type:W,depth:t.depth+1,parent:t};t.responses.set(r,s),t.responsesOrder.push("fakeId"),await Object(x.copyResponseTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===q.ACTION_TYPE_DELETE||e===q.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==q.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}}).prototype,"handleAction",[A.action],Object.getOwnPropertyDescriptor(b.prototype,"handleAction"),b.prototype),z(b.prototype,"transfer",[A.action],Object.getOwnPropertyDescriptor(b.prototype,"transfer"),b.prototype),z(b.prototype,"reorder",[A.action],Object.getOwnPropertyDescriptor(b.prototype,"reorder"),b.prototype),z(b.prototype,"pasteTo",[A.action],Object.getOwnPropertyDescriptor(b.prototype,"pasteTo"),b.prototype),b),oe=(m=z((f=class{constructor(){H(this,"collections",m,this),H(this,"folders",y,this),H(this,"requests",E,this),H(this,"responses",I,this),this.clipboard=null,H(this,"activeItem",T,this),H(this,"openGroups",g,this),H(this,"filteredItems",C,this),H(this,"filteredOpenGroups",_,this),H(this,"searchQuery",P,this),this.previousQuery="",this.active_item_autorun_dispose=Object(A.autorun)(()=>{const{activeEditor:t}=Object(D.getStore)("ActiveWorkspaceSessionStore"),o=Object(D.getStore)("EditorStore").find(t);if(!o||!o.resource)return void this.resetFocus();let r,s;if(e.includes(o.resource,R.REQUEST)?(s=e.last(e.split(o.resource,"/")),r=R.REQUEST):e.includes(o.resource,R.COLLECTION)?(r=R.COLLECTION,s=e.last(e.split(o.resource,"/"))):e.includes(o.resource,R.FOLDER)?(s=e.last(e.split(o.resource,"/")),r=R.FOLDER):e.includes(o.resource,R.EXAMPLE)&&(s=e.last(e.split(o.resource,"/")),r=R.RESPONSE),!r||!s)return void this.resetFocus();const i=this.getModel(r).get(s);this.expandPath(i),this.focusItem(i)}),this.filter_item_autorun_dispose=Object(A.autorun)(()=>{this.setFilteredItems()},{delay:300}),this.search_reaction_dispose=Object(A.reaction)(()=>Object(D.getStore)("ActiveWorkspaceSessionStore").workspace,()=>{this.setSearchQuery("")})}getModel(e){return e===R.COLLECTION?this.collections:e===R.FOLDER?this.folders:e===R.REQUEST?this.requests:e===R.RESPONSE?this.responses:new Map}getParent(e){return e.type===R.FOLDER||e.type===R.REQUEST?e.folder?this.folders.get(e.folder):this.collections.get(e.collection):e.type===R.RESPONSE?this.requests.get(e.request):null}getParentCollection(e){return this.collections.get(e.collection)}get filteredCollections(){const t=e.filter(Object(A.values)(this.collections),e=>this.isFiltered(e.id)&&!this.isArchived(e)&&this.isInActiveWorkspace(e.id));return Object(S.sortCollections)(t)}get items(){const t=[];return e.forEach(this.filteredCollections,e=>{t.push(e),this.isOpen(e.id)&&t.push(...this.orderItemsRecurse(e,1))}),t}get activeCollectionId(){if(!this.activeItem)return null;if(this.activeItem.type===R.COLLECTION)return this.activeItem.id;const e=this.getModel(this.activeItem.type).get(this.activeItem.id);return e&&e.collection}orderItemsRecurse(t,o){const r=[],s=t.folders&&t.folders.size,i=t.requests&&t.requests.size;if(!s&&!i)return[{type:"empty",depth:o}];const{owner:n}=Object(v.decomposeUID)(t.id);return e.forEach(t.foldersOrder,e=>{const s=t.folders.get(Object(v.composeUID)(e,n));if(!s)return void pm.logger.warn("CollectionSidebarModel~orderItemsRecurse","Item from folderOrder missing",e);if(!this.isFiltered(s.id))return;s.depth=o,r.push(s);const i=this.isOpen(s.id)&&this.orderItemsRecurse(s,o+1)||[];r.push(...i)}),e.forEach(t.order,e=>{const s=t.requests.get(Object(v.composeUID)(e,n));if(s){if(this.isFiltered(s.id)&&(s.depth=o,r.push(s),Boolean(s.responses.size)&&this.isOpen(s.id))){s.responses.forEach(e=>{e.depth=o+1});const e=s.responsesOrder.map(e=>{const{modelId:t}=Object(v.decomposeUID)(e),o=Object(v.composeUID)(t,n);return s.responses.get(o)});r.push(...e)}}else pm.logger.warn("CollectionSidebarModel~orderItemsRecurse","Item from folderOrder missing",e)}),r.filter(Boolean)}getCollectionAdapterModel(){const e=this;return{hydrate(t){e.hydrate(t)},add(t){e.addCollection(t)},update(t){e.updateCollection(t)},updateFavorite(t,o){e.collections.get(t).setFavorite(o)},remove(t){e.removeCollectionTree(t)},clear(){e.collections.clear()}}}getFolderAdapterModel(){const e=this;return{add(t){e.addFolder(t)},update(t){e.updateFolder(t)},remove(t){const o=e.folders.get(t);o&&e.removeEntity(o)},clear(){e.folders.clear()}}}getRequestAdapterModel(){const e=this;return{add(t){e.addRequest(t)},update(t){e.updateRequest(t)},remove(t){const o=e.requests.get(t);o&&e.removeEntity(o)},clear(){e.requests.clear()}}}getResponseAdapterModel(){const e=this;return{add(t){e.addResponse(t)},update(t){e.updateResponse(t)},remove(t){const o=e.responses.get(t);o&&e.removeEntity(o)},clear(){e.responses.clear()}}}addRefToParent(e){const t=e&&this.getParent(e);if(t)switch(e.type){case R.FOLDER:t.folders.set(e.id,e);break;case R.REQUEST:t.requests.set(e.id,e);break;case R.RESPONSE:t.responses.set(e.id,e)}}removeRefFromParent(e){const t=e&&this.getParent(e);if(t)switch(e.type){case R.FOLDER:t.folders.delete(e.id);break;case R.REQUEST:t.requests.delete(e.id);break;case R.RESPONSE:t.responses.delete(e.id)}}updateFoldersFromOrder(t){t.folders.clear(),e.forEach(t.foldersOrder,e=>{const{owner:o}=Object(v.decomposeUID)(t.id)||{},r=Object(v.composeUID)(e,o),s=this.folders.get(r);s&&t.folders.set(r,s)})}updateRequestsFromOrder(t){t.requests.clear(),e.forEach(t.order,e=>{const{owner:o}=Object(v.decomposeUID)(t.id)||{},r=Object(v.composeUID)(e,o),s=this.requests.get(r);s&&t.requests.set(r,s)})}addCollection(e){Array.isArray(e)||(e=[e]),this.updateCollectionTree(e)}updateCollection(t){Array.isArray(t)||(t=[t]),e.forEach(t,e=>{const t=this.collections.get(e.id);t&&(t.update(e),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t))})}addFolder(e){const t=new Z(e,this);this.addRefToParent(t),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t),this.folders.set(e.id,t)}updateFolder(e){const t=this.folders.get(e.id);t&&(t.update(e),this.addRefToParent(t),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t))}addRequest(e){const t=new ee(e,this);this.addRefToParent(t),this.requests.set(e.id,t)}updateRequest(e){const t=this.requests.get(e.id);t&&(t.update(e),this.addRefToParent(t))}addResponse(e){const t=new te(e,this);this.addRefToParent(t),this.responses.set(t.id,t)}updateResponse(e){const t=this.responses.get(e.id);t&&(t.update(e),this.addRefToParent(t))}updateCollectionTree(t){e.forEach(t,e=>{const t=new J(e,this);this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t),this.updateFolderTree(t,e.folders),this.updateRequestList(t,e.requests),this.collections.set(e.id,t)})}updateFolderTree(t,o){e.forEach(o,e=>{const o=new Z(e,this);this.updateFolderTree(o,e.folders),this.updateRequestList(o,e.requests),this.folders.set(e.id,o),t.folders.set(e.id,o)})}updateRequestList(t,o){e.forEach(o,e=>{const o=new ee(e,this);this.updateResponseList(o,e.responses),this.requests.set(e.id,o),t.requests.set(e.id,o)})}updateResponseList(t,o){e.forEach(o,e=>{const o=new te(e,this);this.responses.set(e.id,o),t.responses.set(e.id,o)})}removeEntity(e){e&&(this.removeRefFromParent(e),this.removeTree(e))}removeTree(e){switch(e.type){case R.COLLECTION:e.folders.forEach(e=>this.removeTree(e)),e.folders.clear(),e.requests.forEach(e=>this.removeTree(e)),e.requests.clear(),this.collections.delete(e.id);break;case R.FOLDER:e.folders.forEach(e=>this.removeTree(e)),e.folders.clear(),e.requests.forEach(e=>this.removeTree(e)),e.requests.clear(),this.folders.delete(e.id);break;case R.REQUEST:e.responses.forEach(e=>this.removeTree(e)),e.responses.clear(),this.requests.delete(e.id);break;case R.RESPONSE:this.responses.delete(e.id)}}removeCollectionTree(t){e.forEach(t,e=>{const t=this.collections.get(e);t&&this.removeTree(t)})}clear(){Object(A.transaction)(()=>{this.collections.clear(),this.folders.clear(),this.requests.clear(),this.responses.clear()})}hydrate(e){this.clear(),this.updateCollectionTree(e)}get hasFilterQuery(){return Boolean(this.searchQuery)}setSearchQuery(e){this.searchQuery=e}isFiltered(e){return!this.hasFilterQuery||this.filteredItems.has(e)}isArchived(e){return!e.isPublic&&e.isArchived}isInActiveWorkspace(t){return e.get(Object(D.getStore)("ActiveWorkspaceStore"),"dependencies.collections",[]).includes(t)}flattenVisibleItem(e){if(!e)return;const t=this.getModel(e.type).get(e.id);let o=[];if(!t)return;if(this.isFiltered(e.id)&&o.push(t),e.type===R.RESPONSE||!this.isOpen(t.id))return o;const{owner:r}=Object(v.decomposeUID)(t.id);return e.type===R.REQUEST?t.responses.forEach(e=>{o=o.concat(this.flattenVisibleItem(e))}):(t.foldersOrder.forEach(e=>{const t=this.folders.get(Object(v.composeUID)(e,r));o=o.concat(this.flattenVisibleItem(t))}),t.order.forEach(e=>{const t=this.requests.get(Object(v.composeUID)(e,r));o=o.concat(this.flattenVisibleItem(t))})),o}handleFilterChildren(t,o,r){if(!o||!r)return;const s=this.getModel(r).get(o);if(!s)return;const{owner:i}=Object(v.decomposeUID)(s.id)||{};e.forEach(s.order,e=>{const o=Object(v.composeUID)(e,i);!t.has(o)&&t.set(o,!1)}),e.forEach(s.foldersOrder,e=>{const o=Object(v.composeUID)(e,i);!t.has(o)&&t.set(o,!1),this.handleFilterChildren(t,o,R.FOLDER)})}handleFilterParent(e,t,o){if(!t||!o)return;const r=this.getModel(o).get(t);if(!r)return;let s=this.getParent(r);const i=!this.filteredItems.get(t);for(;s;)!e.has(s.id)&&e.set(s.id,!1),i&&this.filteredOpenGroups.delete(s.id),s=this.getParent(s)}updateFilteredItems(e){this.filteredItems=e,this.filteredItems.forEach((e,t)=>{!this.filteredOpenGroups.has(t)&&this.filteredOpenGroups.set(t,!0)})}setFilteredItems(){const t=this.searchQuery,o=A.observable.map();if(!t)return void this.openGroups.clear();const r=e.toLower(t),s=Object(A.values)(this.collections),i=Object(A.values)(this.requests),n=Object(A.values)(this.folders),a=new Set;e.forEach(s,t=>{e.includes(e.toLower(t.name),r)&&(o.set(t.id,!0),this.handleFilterChildren(o,t.id,R.COLLECTION)),a.add(t.id)}),e.forEach(i,t=>{if(a.has(t.collection)){if(!e.includes(e.toLower(t.name),r))return;o.set(t.id,!0),this.handleFilterParent(o,t.id,R.REQUEST)}}),e.forEach(n,t=>{if(a.has(t.collection)){if(!e.includes(e.toLower(t.name),r))return;o.set(t.id,!0),this.handleFilterChildren(o,t.id,R.FOLDER),this.handleFilterParent(o,t.id,R.FOLDER)}}),t!==this.previousQuery&&this.filteredOpenGroups.clear(),this.updateFilteredItems(o),this.previousQuery=t}expandPath(e){let t=e;for(;t&&t.type!==R.COLLECTION;){let e;e=t.request?this.requests.get(t.request):t.folder?this.folders.get(t.folder):this.collections.get(t.collection),e&&this.expandItem(e),t=e}}expandItem(e){this.openGroups.set(e.id,!0),this.hasFilterQuery&&this.filteredOpenGroups.set(e.id,!0)}collapseItem(e){this.openGroups.delete(e.id),this.hasFilterQuery&&this.filteredOpenGroups.set(e.id,!1)}toggleItem(e){if(!e)return;this.isOpen(e.id)?this.collapseItem(e):this.expandItem(e)}isFocused(e){return Boolean(this.activeItem&&this.activeItem.id===e)}focusItem(e){e&&(e instanceof J||e instanceof Z||e instanceof ee||e instanceof te?(this.resetFocus(),this.activeItem=e):pm.logger.error("CollectionSidebarModel~focusItem - item not a know instance model",e.constructor.name))}resetFocus(){this.activeItem&&this.activeItem.dispose(),this.activeItem=null}isOpen(e){return Boolean(this.hasFilterQuery?this.filteredOpenGroups.get(e):this.openGroups.get(e))}focusPreviousCollection(){const{activeCollectionId:t}=this;if(!t)return;const o=this.filteredCollections.findIndex(e=>e.id===t),r=o<=0?this.filteredCollections.length-1:o-1;this.focusItem(e.last(this.flattenVisibleItem(this.filteredCollections[r])))}focusNextCollection(){const{activeCollectionId:e}=this;if(!e)return;const t=this.filteredCollections.findIndex(t=>t.id===e);if(t<this.filteredCollections.length-1)return this.focusItem(this.filteredCollections[t+1]);this.focusItem(this.filteredCollections[0])}focusPreviousItem(){if(!this.activeItem)return;const{activeItem:t}=this,o=this.flattenVisibleItem({id:this.activeCollectionId,type:R.COLLECTION}),r=e.findIndex(o,e=>e.id===t.id);r>0?this.focusItem(o[r-1]):this.focusPreviousCollection()}focusNextItem(){if(!this.activeItem)return;const{activeItem:t}=this,o=t.type===R.COLLECTION?t:t.$collection,r=this.flattenVisibleItem(o),s=e.findIndex(r,e=>e.id===t.id);r&&(s<r.length-1?this.focusItem(r[s+1]):this.focusNextCollection())}copyItem(){this.activeItem&&(this.clipboard={item:this.activeItem,action:"copy"})}cutItem(){this.activeItem&&(this.clipboard={item:this.activeItem,action:"cut"})}async pasteItem(){if(!this.clipboard)return;let e=this.activeItem;const t=this.clipboard.item,o=this.clipboard.action;if(e&&t.type!==R.COLLECTION&&(t.type!==R.RESPONSE||e.type!==R.FOLDER&&e.type!==R.COLLECTION)&&(t.type!==R.FOLDER||e.type!==R.RESPONSE)){if(t.type===R.RESPONSE&&e.type===R.RESPONSE&&(e=this.getParent(e)),t.type!==R.RESPONSE&&e.type===R.REQUEST&&(e=this.getParent(e)),this.clearClipboard(),"cut"===o)return this.reorder(t,e,"on");if("copy"===o){const o=this.getModel(t.type).get(t.id),r=this.getModel(e.type).get(e.id);return o.pasteTo(r)}}}clearClipboard(){this.clipboard=null}async reorder(e,t,o){const r=this.getModel(e.type).get(e.id),s=this.getModel(t.type).get(t.id);"on"===o?await r.transfer&&r.transfer(s):"after"!==o&&"before"!==o||await r.reorder(s,o)}dispose(){this.activeItem&&this.activeItem.dispose(),this.active_item_autorun_dispose&&this.active_item_autorun_dispose(),this.filter_item_autorun_dispose&&this.filter_item_autorun_dispose(),this.search_reaction_dispose&&this.search_reaction_dispose()}}).prototype,"collections",[A.observable],{enumerable:!0,initializer:function(){return A.observable.map([],{deep:!1})}}),y=z(f.prototype,"folders",[A.observable],{enumerable:!0,initializer:function(){return A.observable.map([],{deep:!1})}}),E=z(f.prototype,"requests",[A.observable],{enumerable:!0,initializer:function(){return A.observable.map([],{deep:!1})}}),I=z(f.prototype,"responses",[A.observable],{enumerable:!0,initializer:function(){return A.observable.map([],{deep:!1})}}),T=z(f.prototype,"activeItem",[A.observable],{enumerable:!0,initializer:function(){return null}}),g=z(f.prototype,"openGroups",[A.observable],{enumerable:!0,initializer:function(){return new Map}}),C=z(f.prototype,"filteredItems",[A.observable],{enumerable:!0,initializer:function(){return new Map}}),_=z(f.prototype,"filteredOpenGroups",[A.observable],{enumerable:!0,initializer:function(){return new Map}}),P=z(f.prototype,"searchQuery",[A.observable],{enumerable:!0,initializer:function(){return""}}),z(f.prototype,"filteredCollections",[A.computed],Object.getOwnPropertyDescriptor(f.prototype,"filteredCollections"),f.prototype),z(f.prototype,"items",[A.computed],Object.getOwnPropertyDescriptor(f.prototype,"items"),f.prototype),z(f.prototype,"activeCollectionId",[A.computed],Object.getOwnPropertyDescriptor(f.prototype,"activeCollectionId"),f.prototype),z(f.prototype,"addRefToParent",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"addRefToParent"),f.prototype),z(f.prototype,"removeRefFromParent",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"removeRefFromParent"),f.prototype),z(f.prototype,"updateFoldersFromOrder",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFoldersFromOrder"),f.prototype),z(f.prototype,"updateRequestsFromOrder",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateRequestsFromOrder"),f.prototype),z(f.prototype,"addCollection",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"addCollection"),f.prototype),z(f.prototype,"updateCollection",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateCollection"),f.prototype),z(f.prototype,"addFolder",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"addFolder"),f.prototype),z(f.prototype,"updateFolder",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFolder"),f.prototype),z(f.prototype,"addRequest",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"addRequest"),f.prototype),z(f.prototype,"updateRequest",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateRequest"),f.prototype),z(f.prototype,"addResponse",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"addResponse"),f.prototype),z(f.prototype,"updateResponse",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateResponse"),f.prototype),z(f.prototype,"updateCollectionTree",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateCollectionTree"),f.prototype),z(f.prototype,"updateFolderTree",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFolderTree"),f.prototype),z(f.prototype,"updateRequestList",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateRequestList"),f.prototype),z(f.prototype,"updateResponseList",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateResponseList"),f.prototype),z(f.prototype,"removeEntity",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"removeEntity"),f.prototype),z(f.prototype,"removeTree",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"removeTree"),f.prototype),z(f.prototype,"removeCollectionTree",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"removeCollectionTree"),f.prototype),z(f.prototype,"clear",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"clear"),f.prototype),z(f.prototype,"hasFilterQuery",[A.computed],Object.getOwnPropertyDescriptor(f.prototype,"hasFilterQuery"),f.prototype),z(f.prototype,"setSearchQuery",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"setSearchQuery"),f.prototype),z(f.prototype,"handleFilterChildren",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"handleFilterChildren"),f.prototype),z(f.prototype,"handleFilterParent",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"handleFilterParent"),f.prototype),z(f.prototype,"updateFilteredItems",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFilteredItems"),f.prototype),z(f.prototype,"expandItem",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"expandItem"),f.prototype),z(f.prototype,"collapseItem",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"collapseItem"),f.prototype),z(f.prototype,"toggleItem",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"toggleItem"),f.prototype),z(f.prototype,"focusItem",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"focusItem"),f.prototype),z(f.prototype,"resetFocus",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"resetFocus"),f.prototype),z(f.prototype,"focusPreviousCollection",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"focusPreviousCollection"),f.prototype),z(f.prototype,"focusNextCollection",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"focusNextCollection"),f.prototype),z(f.prototype,"focusPreviousItem",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"focusPreviousItem"),f.prototype),z(f.prototype,"focusNextItem",[A.action],Object.getOwnPropertyDescriptor(f.prototype,"focusNextItem"),f.prototype),f)}.call(this,o(1026))},14402:function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"getRunnableCollections",(function(){return r})),o.d(t,"sortCollections",(function(){return s}));o(2870),o(2100);const r=(e,t)=>i(e,t),s=e=>i(e,{}),i=(t,o={})=>e.chain(t).filter(e=>!o[e.id]).sortBy(t=>t.isFavorite?"0"+e.toLower(t.name):"1"+e.toLower(t.name)).value()}.call(this,o(1026))}}]);
//# sourceMappingURL=34-ee58d0a84fc6d98d028e.min.js.map